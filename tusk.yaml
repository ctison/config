tasks:
  build-kali:
    options:
      options:
        usage: 'options to pass to docker build command'
    run:
    - docker build -f docker/kali/Dockerfile -t ctison/kali ${options} .

  create-bin:
    args:
      NAME:
        usage: name of the bin to setup as ./bin/${NAME}
    run:
    - |
      /bin/sh -c "
      cat > ./bin/${NAME} << EOF
      #!/bin/sh
      
      umask 0077
      set -ex
      
      EOF"
    - chmod 700 ./bin/${NAME}

  create-bin-install:
    args:
      NAME:
        usage: name of the file to setup as ./bin/install/${NAME}
    run:
    - |
        /bin/sh -c "
        cat > ./bin/install/${NAME} << EOF
        #!/bin/sh
        
        set -ex
        umask 0077

        TAR='tar --no-same-o --no-same-p'
        EOF"
    - chmod 700 ./bin/install/${NAME}